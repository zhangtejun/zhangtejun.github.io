---
layout: post
title:  "编码"
date:   2019-08-18 12:53:34
author: zhangtejun
categories: Java
---
##### 需要编码的原因
* 在计算机中存储信息的最小单元是1个字节，即8个bit,所能表示的字符访范围是0~255。
* 需要表示的符号太多，无法用一个字节来完全表示。
* 要解决这个矛盾需要有一个新的数据结构char来表示，从byte到char必须要编码。

常见的编码有ASCII，ISO-8859-1，GB2312，GBK，UTF-8，UTF-16等，GB2312，GBK，UTF-8，UTF-16都可以表示汉字。

选择哪种编码来存储汉字，要考虑的因素是存储空间还是编码效率。

**ASCII码**
ASCII码总共128个，用1个字节的低7位表示，0~31及127是控制字符如换行，回车，删除等，32~126是打印字符。

在标准ASCII中，其最高位(b7)用作奇偶校验位。

后128个称为扩展ASCII码。许多基于x86的系统都支持使用扩展（或“高”）ASCII。扩展ASCII 码允许将每个字
符的第8 位用于确定附加的128 个特殊符号字符、外来语字母和图形符号。

**ISO-8859-1**
ISO-8859-1仍然是单字节编码，总共可表示256个字符。

**GB2312**
GB2312全称《信息技术中文编码字符集》，是双字节编码，GB2312编码共收录汉字6763个，其中一级汉字3755个，二级汉字3008个。
同时，GB2312编码收录了包括拉丁字母、希腊字母、日文平假名及片假名字母、俄语西里尔字母在内的682个全角字符。

GB2312编码对所收录字符进行了“分区”处理，共94个区，每区含有94个位，共8836个码位。这种表示方式也称为区位码。

GB2312规定对收录的每个字符采用两个字节表示，第一个字节为“高字节”，对应94个区；第二个字节为“低字节”，对应94个位。
所以它的区位码范围是：0101－9494。区号和位号分别加上0xA0就是GB2312编码。例如最后一个码位是9494，区号和位号分别转换成
十六进制是5E5E，0x5E+0xA0＝0xFE，所以该码位的GB2312编码是FEFE。

**GBK**
GBK全称《汉字内码扩展规范》是在GB2312-80标准基础上的内码扩展规范，使用了双字节编码方案，其编码范围从8140至FEFE（剔除xx7F），
共23940个码位，共收录了21003个汉字，完全兼容GB2312-80标准。即GB2312编码可以用GBK来解码。

**GB18030**
全称《信息技术 中文编码字符集》，可能是单字节，双字节或者4字节编码，兼容GBK，是我国标准，实际应用系统使用的不广泛。

**UTF-16**
Unicode是国际组织制定的可以容纳世界上所有文字和符号的字符编码方案。

UTF-16定义了Unicode字符在计算机中的存取方法。UTF-16用2个字节来表示Unicode的转化形式，采用定长表示方法，无论什么字符都是2字节表示。

2个字节表示字符可以简化字符串操作，这是java用UTF-16作为内存的字符存储格式的一个原因。

**UTF-8**
UTF-16采用2个字节表示一个字符，一大部分字符用一个字节就可以表示，存储空间被放大了一倍，在网络带宽有限的情况下，会增加网络传输流量。

而UTF-8采用变成技术，每个编码区有不同的字码长度。不同的字符可以由1~6个字节组成。

UTF-8是一种变长字节编码方式。对于某一个字符的UTF-8编码，如果只有一个字节则其最高二进制位为0；如果是多字节，其第一个字节从最高位开始，
连续的二进制位值为1的个数决定了其编码的位数，其余各字节均以10开头。UTF-8最多可用到6个字节。
```
1字节 0xxxxxxx
2字节 110xxxxx 10xxxxxx
3字节 1110xxxx 10xxxxxx 10xxxxxx
4字节 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx
5字节 111110xx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx
6字节 1111110x 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx
```

##### java中需要编码的场景
* I/O操作
* 内存中操作：`String.getBytes("UTF-8")，new String("X","UTF-8")`或者Charset类的encode和decode，分别对应`char[]`到`byte[]`的编码和`byte[]`到`char[]`的解码。
